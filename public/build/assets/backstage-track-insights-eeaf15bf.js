import{k as K,l as Ce,m as T,a8 as Q,bu as Le,j as e,r as x,bO as Re,X as M,c6 as gs,a2 as D,M as Se,bN as ea,a7 as _e,A as S,n as G,q as Ve,aO as ne,T as l,ad as R,t as te,R as fs,aW as sa,ca as aa,cb as ta,bP as hs,H as ps,cA as na,br as ra,cB as ia,cC as la,bo as $e,E as js,ba as oa,cD as ca,cE as da,cF as ls,cG as ua,cH as ma,bL as os,aH as qe,I,ax as re,aB as Be,aC as Oe,ak as oe,aN as Ae,ac as cs,b1 as xa,cI as C,cJ as ga,a3 as fa,cg as ha,cK as pa,ae as He,Y as Z,_ as ja,u as Fe,ag as ds,ah as ba,Z as H,cL as va,cf as ya,aI as Ke,al as Pe,am as P,D as J,a4 as ce,a5 as W,a0 as ka,N as bs,F as vs,y as de,ai as Y,aj as X,a$ as We,x as Ge,az as ys,aG as ks,bZ as Ns,bl as ws,K as Is,aK as Cs,J as O,bq as Ss,aJ as Na,ay as wa,$ as Ia,z as Ca,i as De,G as Sa,aL as Aa,S as Fa}from"./main-ccc5dfb3.js";import{z as Qe,O as As,Z as Pa,G as Ze,F as Da,j as Ne,R as Fs,s as Ta,k as we,K as Ua,A as Je,L as Ma,N as Ps,o as za,u as Ds,v as Ea,f as Te,e as Ye,q as Ue,S as La,_ as Ra,H as _a,x as Va,p as Xe,r as $a,T as qa,a as Ba,b as je,c as Oa,d as be,V as Ha,l as Ka,J as Ts,m as Wa,P as Ga,U as Qa,h as Us,t as Ms,n as zs}from"./play-arrow-filled-6e3efa58.js";import{b as Me,S as Za,F as Ie,a as Ja}from"./theme-value-to-hex-f2d1a903.js";import{g as Ya,h as Xa,t as et,b as st,c as at,d as tt,i as nt,j as rt,k as it,l as lt,L as ot,P as us,G as ct,D as dt,R as ut}from"./geo-chart-a8be9fbe.js";import{E as es}from"./Edit-da030a1c.js";const ee=(s,a,t)=>{const n=t?[...t]:s.split("/");return a&&n.push(a),n};function Xn(s,a,t,n){a.paginate||(a.paginate="preferLengthAware");const r=t==null?void 0:t.queryKey;return t==null||delete t.queryKey,K({...t,queryKey:ee(s,a,r),queryFn:({signal:i})=>mt(s,a,n,i),placeholderData:Ce})}async function mt(s,a,t,n){a.query&&await new Promise(i=>setTimeout(i,300));const r=await T.get(s,{params:a,signal:a.query?n:void 0}).then(i=>i.data);return t==null||t(r),r}function Es(s,a,t){return K({queryKey:[...s.split("/"),a],queryFn:()=>xt(s,a),placeholderData:Ce,...t})}async function xt(s,a){return T.get(s,{params:a}).then(t=>"results"in t.data?t.data:{results:Object.values(t.data).find(r=>Array.isArray(r))})}function Ls(s,a,t){return K({queryKey:[s,a],queryFn:()=>gt(s,a),...t})}async function gt(s,a){return T.get(s,{params:a}).then(t=>t.data)}function ft({label:s,className:a,background:t,value:n,defaultValue:r="",placeholder:i=S("Select item..."),searchPlaceholder:o=S("Find an item..."),onChange:c,description:d,errorMessage:h,invalid:p,autoFocus:m,queryParams:g,endpoint:u,disabled:f,required:j}){var V;const b=x.useRef(null),[y,N]=x.useState(""),[F,w]=Re(n,r,c),U=Es(u,{query:y,...g}),{trans:z}=M(),_=gs({size:"md"});return F?e.jsxs("div",{className:a,children:[e.jsx("div",{className:_.label,children:s}),e.jsx("div",{className:D("rounded-input border p-8",t,p&&"border-danger"),children:e.jsx(Se,{initial:!1,mode:"wait",children:e.jsx(ht,{disabled:f,endpoint:u,modelId:F,queryParams:g,onEditClick:()=>{w(""),N(""),requestAnimationFrame(()=>{var A,$;(A=b.current)==null||A.focus(),($=b.current)==null||$.click()})}})})}),d&&!h&&e.jsx("div",{className:_.description,children:d}),h&&e.jsx("div",{className:_.error,children:h})]}):e.jsx(ea,{className:a,showSearchField:!0,invalid:p,errorMessage:h,description:d,color:"white",isAsync:!0,background:t,placeholder:z(i),searchPlaceholder:z(o),label:s,isLoading:U.isFetching,items:(V=U.data)==null?void 0:V.results,inputValue:y,onInputValueChange:N,selectionMode:"single",selectedValue:F,onSelectionChange:w,ref:b,autoFocus:m,disabled:f,required:j,children:A=>e.jsx(_e,{value:A.id,description:A.description,startIcon:e.jsx(Qe,{src:A.image,size:"sm",label:A.name}),children:A.name},A.id)})}function ht({modelId:s,onEditClick:a,endpoint:t,disabled:n,queryParams:r}){const{data:i,isLoading:o}=Ls(`${t}/${s}`,r);return o||!(i!=null&&i.model)?e.jsx(pt,{},"skeleton"):e.jsxs(G.div,{className:D("flex items-center gap-10",n&&"pointer-events-none cursor-not-allowed text-disabled"),...Ve,children:[e.jsx(Qe,{src:i.model.image,label:i.model.name}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm leading-4",children:i.model.name}),e.jsx("div",{className:"text-xs text-muted",children:i.model.description})]}),e.jsx(ne,{label:e.jsx(l,{message:"Change item"}),children:e.jsx(R,{className:"ml-auto text-muted",size:"sm",onClick:a,disabled:n,children:e.jsx(es,{})})})]},"preview")}function pt(){return e.jsxs(G.div,{className:"flex items-center gap-10",...Ve,children:[e.jsx(te,{variant:"rect",size:"w-32 h-32"}),e.jsxs("div",{className:"max-h-[36px] flex-auto",children:[e.jsx(te,{className:"text-xs"}),e.jsx(te,{className:"max-h-8 text-xs"})]}),e.jsx(te,{variant:"icon",size:"w-24 h-24"})]})}function jt({name:s,...a}){const{clearErrors:t}=Q(),{field:{onChange:n,value:r=""},fieldState:{invalid:i,error:o}}=Le({name:s});return e.jsx(ft,{value:r,onChange:c=>{n(c),t(s)},invalid:i,errorMessage:o==null?void 0:o.message,...a})}function Ee(s){return{id:s,name:`${s}`,description:`${s}`}}function bt(s,a){const t=x.useRef(null),n=sa(a),{displayWith:r=E=>E.name,validateWith:i,children:o,suggestions:c,isLoading:d,inputValue:h,onInputValueChange:p,onItemSelected:m,placeholder:g,onOpenChange:u,chipSize:f="sm",openMenuOnFocus:j=!0,showEmptyMessage:b,value:y,defaultValue:N,onChange:F,valueKey:w,isAsync:U,allowCustomValue:z=!0,showDropdownArrow:_,onChipClick:V,alwaysShowAvatar:A=!1,readOnly:$,...xe}=s,ge=gs({...s,flexibleHeight:!0}),[ae,fe]=kt(s),[he,pe]=x.useState(!1),v=e.jsx(js,{isIndeterminate:!0,size:"w-24 h-24","aria-label":"loading..."}),k=_?e.jsx(oa,{}):null,{fieldProps:q,inputProps:B}=aa({...xe,focusRef:n,endAdornment:d&&he?v:k});return e.jsx(ta,{fieldClassNames:ge,...q,children:e.jsxs(Ya,{ref:t,className:D("flex flex-wrap items-center",ge.input),onClick:()=>{var E;(E=n.current)==null||E.focus()},children:[e.jsx(vt,{displayChipUsing:r,onChipClick:V,items:ae,setItems:fe,chipSize:f,alwaysShowAvatar:A,readOnly:$}),e.jsx(yt,{size:s.size,showEmptyMessage:b,inputProps:B,inputValue:h,onInputValueChange:p,fieldRef:t,inputRef:n,chips:ae,setChips:fe,validateWith:i,isLoading:d,suggestions:c,placeholder:g,openMenuOnFocus:j,listboxIsOpen:he,setListboxIsOpen:pe,allowCustomValue:z,readOnly:$,children:o})]})})}function vt({items:s,setItems:a,displayChipUsing:t,chipSize:n,onChipClick:r,alwaysShowAvatar:i,readOnly:o}){const c=hs(),d=x.useCallback(h=>{const p=s.findIndex(g=>g.id===h),m=[...s];return p>-1&&(m.splice(p,1),a(m)),m},[s,a]);return e.jsx(As,{className:D("max-w-full flex-shrink-0 flex-wrap",n==="xs"?"my-6":"my-8"),size:n,selectable:!0,children:s.map(h=>e.jsx(ps,{errorMessage:h.errorMessage,adornment:h.image||i?e.jsx(Qe,{circle:!0,src:h.image,fallback:"initials",label:h.name}):null,onClick:()=>r==null?void 0:r(h),onRemove:o?void 0:()=>{d(h.id).length?c==null||c.focusPrevious({tabbable:!0}):c==null||c.focusLast()},children:t(h)},h.id))})}function yt(s){const{inputRef:a,fieldRef:t,validateWith:n,setChips:r,chips:i,suggestions:o,inputProps:c,placeholder:d,openMenuOnFocus:h,listboxIsOpen:p,setListboxIsOpen:m,allowCustomValue:g,isLoading:u,size:f,readOnly:j}=s,b=hs(),y=x.useCallback(v=>{v=(v||[]).filter(k=>{const q=!k||!k.id||!k.name;return!(i.findIndex(E=>E.id===(k==null?void 0:k.id))>-1)&&!q}),v.length&&(n&&(v=v.map(k=>n(k))),r([...i,...v]))},[i,r,n]),N=na({...s,clearInputOnItemSelection:!0,isOpen:p,onOpenChange:m,items:o,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:v=>{ae(v)}}),{state:{activeIndex:F,setActiveIndex:w,isOpen:U,setIsOpen:z,inputValue:_,setInputValue:V},refs:A,listboxId:$,collection:xe,onInputChange:ge}=N,ae=v=>{const k=xe.size&&F!=null?[...xe.values()][F]:null;k!=null&&k.item?y([k.item]):g&&y([Ee(k?k.value:v)]),V(""),w(null),z(!1)};ra(()=>{t.current&&A.reference.current!==t.current&&N.reference(t.current)},[t,N,A]);const{handleTriggerKeyDown:fe,handleListboxKeyboardNavigation:he}=ca(N),pe=da(()=>{h&&!U&&z(!0)});return e.jsx(ia,{listbox:N,mobileOverlay:la,isLoading:u,onPointerDown:v=>{v.preventDefault()},children:e.jsx("input",{readOnly:j,type:"text",className:D("mx-8 my-4 min-w-30 flex-[1_1_60px] bg-transparent text-sm outline-none",f==="xs"?"h-20":"h-30"),placeholder:d,...$e(c,{ref:a,value:_,onChange:ge,onPaste:v=>{const q=v.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(q){v.preventDefault();const B=window.getSelection();B!=null&&B.rangeCount&&(B.deleteFromDocument(),y(q.map(E=>Ee(E))))}},"aria-autocomplete":"list","aria-controls":U?$:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:v=>{if(j)return;const k=v.target;if(v.key==="Enter"){v.preventDefault(),ae(k.value);return}if(v.key==="Escape"&&U&&(z(!1),V("")),v.key==="ArrowUp"&&U&&(F===0||F==null)){w(null);return}if(F!=null&&(v.key==="ArrowLeft"||v.key==="ArrowRight")){v.preventDefault();return}if((v.key==="ArrowLeft"||v.key==="Backspace"||v.key==="Delete")&&k.selectionStart===0&&F==null&&i.length){b==null||b.focusPrevious({tabbable:!0});return}fe(v)||he(v)},onFocus:j?void 0:pe,onClick:j?void 0:pe})})})}function kt({onChange:s,value:a,defaultValue:t,valueKey:n}){const r=x.useMemo(()=>ms(a),[a]),i=x.useMemo(()=>ms(t),[t]),o=x.useCallback(c=>{const d=n?c.map(h=>h[n]):c;s==null||s(d)},[s,n]);return Re(r||void 0,i||[],o)}function ms(s){if(s!=null)return s.map(a=>typeof a!="object"?Ee(a):a)}const Nt=fs.forwardRef(bt);function Rs({children:s,...a}){const{field:{onChange:t,onBlur:n,value:r=[],ref:i},fieldState:{invalid:o,error:c}}=Le({name:a.name}),d={onChange:t,onBlur:n,value:r,invalid:o,errorMessage:c==null?void 0:c.message};return e.jsx(Nt,{ref:i,...$e(d,a),children:s})}function wt(s){const a=Me(),[t,n]=x.useState(!s.value&&!s.defaultValue),r=s.onChange,[i,o]=Re(s.value||a,s.defaultValue||a,w=>{n(!1),r==null||r(w)}),{min:c,max:d,granularity:h,timezone:p,calendarIsOpen:m,setCalendarIsOpen:g,closeDialogOnSelection:u}=Xa(i,s),f=x.useCallback(()=>{n(!0),o(a),r==null||r(null),g(!1)},[a,o,r,g]),[j,b]=x.useState(()=>[ls(i)]),y=x.useCallback(w=>{c&&w.compare(c)<0?w=c:d&&w.compare(d)>0&&(w=d);const U=i?i.set(w):et(w,p);o(U),b([ls(U)]),n(!1)},[o,c,d,i,p]),N=x.useCallback(w=>!t&&ua(i,w),[i,t]),F=x.useCallback(w=>({onClick:()=>{y==null||y(w),u&&(g==null||g(!1))}}),[y,g,u]);return{selectedValue:i,setSelectedValue:o,calendarIsOpen:m,setCalendarIsOpen:g,dayIsActive:N,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:F,calendarDates:j,setCalendarDates:b,isPlaceholder:t,clear:f,setIsPlaceholder:n,min:c,max:d,granularity:h,timezone:p,closeDialogOnSelection:u}}function It({showCalendarFooter:s,...a}){const t=wt(a),n=x.useRef(null),r=Me(),i=s&&e.jsx(qe,{padding:"px-14 pb-14",startAction:e.jsx(I,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:e.jsx(l,{message:"Clear"})}),children:e.jsx(I,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(r),t.setCalendarIsOpen(!1)},children:e.jsx(l,{message:"Today"})})}),o=e.jsx(re,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:n,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:e.jsxs(Be,{size:"auto",children:[e.jsx(Oe,{className:"flex items-start gap-40",padding:s?"px-24 pt-20 pb-10":null,children:e.jsx(nt,{state:t,visibleMonths:1})}),i]})}),c={onClick:d=>{d.stopPropagation(),d.preventDefault(),St(d)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return e.jsxs(x.Fragment,{children:[e.jsx(st,{ref:n,wrapperProps:c,endAdornment:e.jsx(at,{className:D(a.disabled&&"text-disabled")}),...a,children:e.jsx(tt,{segmentProps:c,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),o]})}function Ct(s){const{min:a,max:t}=s,{trans:n}=M(),{format:r}=ma(),{field:{onChange:i,onBlur:o,value:c=null,ref:d},fieldState:{invalid:h,error:p}}=Le({name:s.name,rules:{validate:u=>{if(!u)return;const f=os(u);if(a&&f.compare(a)<0)return n({message:"Enter a date after :date",values:{date:r(u)}});if(t&&f.compare(t)>0)return n({message:"Enter a date before :date",values:{date:r(u)}})}}}),m=c?os(c):null,g={onChange:u=>{i(u&&u.toAbsoluteString())},onBlur:o,value:m,invalid:h,errorMessage:p==null?void 0:p.message,inputRef:d};return e.jsx(It,{...$e(g,s)})}function St(s){return["hour","minute","dayPeriod"].includes(s.currentTarget.ariaLabel||"")}function At(){const[s,a]=x.useState(!1),t=x.useRef(),n=x.useCallback(r=>{var i;if(r){const o=new IntersectionObserver(([c])=>a(c.intersectionRatio<1),{threshold:[1]});t.current=o,o.observe(r)}else t.current&&((i=t.current)==null||i.disconnect())},[]);return{isSticky:s,sentinelRef:n}}function ue({onSubmit:s,form:a,title:t,subTitle:n,children:r,actions:i,backButton:o,isLoading:c=!1,disableSaveWhenNotDirty:d=!1,wrapInContainer:h=!0,submitButtonText:p,variant:m="sticky"}){const{isSticky:g,sentinelRef:u}=At(),f=d?Object.keys(a.formState.dirtyFields).length:!0,j=e.jsx(I,{variant:"flat",color:"primary",type:"submit",disabled:c||!f,children:p??e.jsx(l,{message:"Save"})});return e.jsxs(oe,{onSubmit:s,onBeforeSubmit:()=>a.clearErrors(),form:a,className:"relative",children:[m==="sticky"&&e.jsx("div",{ref:u}),e.jsx(Ft,{wrapInContainer:h,startActions:o,subTitle:n,endActions:e.jsxs(x.Fragment,{children:[i,m==="sticky"&&j]}),className:D(g&&"bg shadow",m==="sticky"&&"sticky"),children:t}),e.jsx("div",{className:h?"container mx-auto px-24 pb-24":void 0,children:e.jsx("div",{className:"rounded",children:r})}),m==="popup"&&e.jsx(Pt,{saveButton:j,isLoading:c})]})}function Ft({className:s,wrapInContainer:a,children:t,subTitle:n,startActions:r,endActions:i}){return e.jsx("div",{className:D("top-0 z-10 my-12 transition-shadow md:my-24",s),children:e.jsxs("div",{className:D("flex items-center gap-24 py-14 md:items-start",a&&"container mx-auto px-24"),children:[r,e.jsxs("div",{className:"overflow-hidden overflow-ellipsis md:mr-64",children:[e.jsx("h1",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-xl md:text-3xl",children:t}),n&&e.jsx("div",{className:"mt-4",children:n})]}),e.jsx("div",{className:"mr-auto"}),i]})})}function er({label:s,children:a,margin:t="mb-48",labelMargin:n="mb-16"}){return e.jsxs("section",{className:D(t),children:[e.jsx("div",{className:D(n,"text-lg font-semibold"),children:s}),a]})}function Pt({saveButton:s,isLoading:a}){const{formState:t,reset:n}=Q();return e.jsx(Se,{children:t.isDirty&&e.jsxs(x.Fragment,{children:[e.jsx("div",{className:"invisible h-92"}),e.jsxs(G.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.2},className:"fixed bottom-0 left-0 right-0 z-20 flex items-center justify-center gap-16 border-t bg px-12 py-28 shadow-[rgba(0,0,0,0.2)_0px_0px_10px]",children:[e.jsx(I,{variant:"outline",onClick:()=>n(),children:e.jsx(l,{message:"Cancel"})}),s??e.jsx(I,{variant:"flat",color:"primary",type:"submit",disabled:a,children:e.jsx(l,{message:"Save changes"})})]},"dirty-panel")]})})}const Dt=Ae(e.jsx("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined"),_s=""+new URL("music-7a11c2fe.svg",import.meta.url).href;function Tt(s){return K({queryKey:["artists","search-suggestions",s],queryFn:()=>Ut(s),placeholderData:Ce})}async function Ut(s){return T.get("search/suggestions/artist",{params:s}).then(a=>a.data)}function Vs({name:s,className:a}){const{trans:t}=M(),[n,r]=x.useState(""),{data:i,isLoading:o}=Tt({query:n});return e.jsx(Rs,{className:a,name:s,label:e.jsx(l,{message:"Artists"}),isAsync:!0,inputValue:n,onInputValueChange:r,suggestions:i==null?void 0:i.results,placeholder:t(S("+Add artist")),isLoading:o,allowCustomValue:!1,children:i==null?void 0:i.results.map(c=>e.jsx(_e,{value:c,startIcon:c.image?e.jsx("img",{className:"h-24 w-24 rounded-full object-cover",src:c.image,alt:""}):void 0,children:c.name},c.id))})}function ie({name:s,label:a,placeholder:t,model:n,className:r,allowCustomValue:i=!1}){const[o,c]=x.useState(""),{data:d,isLoading:h}=Es(`normalized-models/${n}`,{query:o});return e.jsx(Rs,{className:r,name:s,label:a,isAsync:!0,inputValue:o,onInputValueChange:c,suggestions:d==null?void 0:d.results,placeholder:t,isLoading:h,allowCustomValue:i,children:d==null?void 0:d.results.map(p=>e.jsx(_e,{value:p,startIcon:p.image?e.jsx("img",{className:"h-24 w-24 rounded-full object-cover",src:p.image,alt:""}):void 0,children:p.name},p.id))})}const $s="tag",qs=Ae(e.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"}),"FileUploadOutlined");function Bs({fileUpload:s,status:a,className:t}){const n=(s==null?void 0:s.bytesUploaded)||0,r=x.useMemo(()=>cs(s.file.size),[s.file.size]),i=x.useMemo(()=>cs(n),[n]);let o;return a==="completed"?o=e.jsx(l,{message:"Upload complete"}):a==="aborted"?o=e.jsx(l,{message:"Upload cancelled"}):a==="failed"?o=e.jsx(l,{message:"Upload failed"}):a==="processing"?o=e.jsx(l,{message:"Processing upload..."}):a==="pending"?o=e.jsx(l,{message:"Waiting to start..."}):o=e.jsx(l,{message:":bytesUploaded of :totalBytes uploaded",values:{bytesUploaded:i,totalBytes:r}}),e.jsx("div",{className:D("text-xs text-muted",t),children:o})}function Os({fileUpload:s,status:a,onAbort:t,size:n="md",className:r}){return e.jsxs("div",{className:r,children:[e.jsxs("div",{className:"flex items-center justify-between gap-24",children:[e.jsx(Bs,{fileUpload:s,status:a}),e.jsx(Mt,{fileUpload:s,status:a,onAbort:t})]}),e.jsx(xa,{size:n==="sm"?"xs":"sm",radius:"rounded-sm",value:s.percentage,isIndeterminate:a==="processing"||a==="pending"})]})}function Mt({fileUpload:s,status:a,onAbort:t}){C(i=>i.abortUpload),C(i=>i.clearInactive);const n=s.errorMessage;let r;if(a==="failed"){const i=n||S("This file could not be uploaded");r=e.jsx(ve,{children:e.jsx(ne,{variant:"danger",label:e.jsx(ga,{value:i}),children:e.jsx(fa,{className:"text-danger",size:"sm"})})})}else a==="aborted"?r=e.jsx(ve,{children:e.jsx(ha,{className:"text-warning",size:"sm"})}):a==="completed"||a==="processing"?r=e.jsx(ve,{children:e.jsx(pa,{size:"sm",className:"text-primary"})}):t?r=e.jsx(ve,{children:e.jsx(R,{size:"xs",onClick:()=>t(s.file.id),children:e.jsx(He,{})})}):r=e.jsx("div",{className:"h-30 w-30"});return e.jsx(Se,{children:r})}function ve({children:s,...a}){return e.jsx(G.div,{className:"flex h-30 w-30 items-center justify-center",...a,initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},children:s})}function zt(){return Z({mutationFn:s=>Et(s),onError:s=>ja(s)})}function Et(s){return T.post(`tracks/${s.fileEntryId}/extract-metadata`,s).then(a=>Lt(a.data))}function Lt(s){const a={name:s.metadata.title,duration:s.metadata.duration,genres:s.metadata.genres||[],description:s.metadata.comment,lyric:s.metadata.lyrics,release_date:s.metadata.release_date,album_name:s.metadata.album_name};return s.metadata.album&&(a.album_id=s.metadata.album.id),s.metadata.artist&&(a.artists=[s.metadata.artist]),s.metadata.image&&(a.image=s.metadata.image.url),a}function Hs(s,a){var t,n;!((t=s.getValues("artists"))!=null&&t.length)&&a.artists&&s.setValue("artists",a.artists),!s.getValues("image")&&a.image&&s.setValue("image",a.image),a.release_date&&s.setValue("release_date",a.release_date),(n=a.genres)!=null&&n.length&&s.setValue("genres",ke(s.getValues("genres"),a.genres)),!s.getValues("name")&&a.album_name&&s.setValue("name",a.album_name)}function le(s,a){return{...a,...s,artists:ke(a.artists,s.artists),genres:ke(a.genres,s.genres,"name"),tags:ke(a.tags,s.tags,"name")}}function ke(s=[],a=[],t="id"){return a=a.filter(n=>!s.find(r=>r[t]===n[t])),[...s,...a]}const Rt=50*1024*1024;function ze(s){const{uploads:a}=Fe(),t=x.useMemo(()=>({allowedFileTypes:[ds.audio,ds.video],maxFileSize:a.max_size||Rt}),[a.max_size]),n=zt(),r=x.useRef(s);r.current=s;const i=C(u=>u.uploadMultiple),o=C(u=>u.updateFileUpload),c=C(u=>u.getUpload),d=x.useCallback((u,f)=>{var j;o(u,{meta:{...((j=c(u))==null?void 0:j.meta)||{},...f}})},[o,c]),h=x.useMemo(()=>({metadata:{diskPrefix:"track_media",disk:ba.public},restrictions:t,onSuccess:(u,f)=>{d(f.id,{isExtractingMetadata:!0}),n.mutate({fileEntryId:u.id,autoMatchAlbum:r.current.autoMatchAlbum},{onSuccess:j=>{d(f.id,{isExtractingMetadata:!1});const b={...j,src:u.url};r.current.onMetadataChange(f,b)},onError:()=>{d(f.id,{isExtractingMetadata:!1})}})},onError:u=>{u&&H.danger(u)}}),[n,d,t]),p=x.useCallback(u=>{const f=u.filter(j=>!va(j,t));return u.length!==f.length&&H.danger(S(":count of your files is not supported.",{values:{count:u.length-f.length}})),f},[t]),m=x.useCallback(async u=>{if(p(u).length){u.forEach(j=>{var b,y;(y=(b=r.current).onUploadStart)==null||y.call(b,{name:j.name,uploadId:j.id})}),i(u,h);for(const j of u){d(j.id,{isGeneratingWave:!0});const b=await Pa(j.native);b&&r.current.onMetadataChange(j,{waveData:b}),d(j.id,{isGeneratingWave:!1})}}},[h,i,d,p]);return{openFilePicker:x.useCallback(async()=>{const u=await ya({multiple:!0,types:t.allowedFileTypes});await m(u)},[m,t]),uploadTracks:m,validateUploads:p}}function ss(s){const a=C(r=>s?r.fileUploads.get(s):null);let t=!1,n;if(a){const r=a.meta,i=(r==null?void 0:r.isExtractingMetadata)||(r==null?void 0:r.isGeneratingWave);t=(a==null?void 0:a.status)==="pending"||(a==null?void 0:a.status)==="inProgress"||!!i,n=(a==null?void 0:a.status)==="completed"&&i?"processing":a==null?void 0:a.status}return{isUploading:t,status:n,activeUpload:a}}function _t(){const[s,a]=x.useState(),{setValue:t,watch:n,getValues:r}=Q(),{openFilePicker:i}=ze({onUploadStart:({uploadId:m})=>a(m),onMetadataChange:(m,g)=>{const u=le(g,r());Object.entries(u).forEach(([f,j])=>t(f,j,{shouldDirty:!0}))}}),{status:o,isUploading:c,activeUpload:d}=ss(s),h=C(m=>m.abortUpload),p=C(m=>m.clearInactive);return e.jsxs("div",{children:[e.jsx(I,{className:"w-full",variant:"flat",color:"primary",startIcon:e.jsx(qs,{}),disabled:c,onClick:()=>i(),children:n("src")?e.jsx(l,{message:"Replace file"}):e.jsx(l,{message:"Upload file"})}),d&&e.jsx(Os,{fileUpload:d,status:o,className:"mt-24",onAbort:m=>{h(m),p()}})]})}function me({showExternalIdFields:s,showAlbumField:a=!0,uploadButton:t}){const{trans:n}=M(),r=Ke();return e.jsxs("div",{className:"gap-24 md:flex",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx(Pe,{name:"image",diskPrefix:"track_image",variant:r?"input":"square",label:r?e.jsx(l,{message:"Image"}):null,previewSize:r?void 0:"w-full md:w-224 aspect-square",stretchPreview:!0}),e.jsx("div",{className:"mt-24",children:t||e.jsx(_t,{})})]}),e.jsxs("div",{className:"mt-24 flex-auto md:mt-0",children:[e.jsx(P,{name:"name",label:e.jsx(l,{message:"Name"}),className:"mb-24",required:!0,autoFocus:!0}),a&&e.jsx(jt,{className:"mb-24",label:e.jsx(l,{message:"Album"}),name:"album_id",endpoint:"search/suggestions/album"}),e.jsx(Vs,{name:"artists",className:"mb-24"}),e.jsx(ie,{label:e.jsx(l,{message:"Genres"}),placeholder:n(S("+Add genre")),model:Ze,name:"genres",allowCustomValue:!0,className:"mb-24"}),e.jsx(ie,{label:e.jsx(l,{message:"Tags"}),placeholder:n(S("+Add tag")),model:$s,name:"tags",allowCustomValue:!0,className:"mb-24"}),e.jsx(P,{name:"description",label:e.jsx(l,{message:"Description"}),inputElementType:"textarea",rows:5,className:"mb-24"}),e.jsx(qt,{}),s&&e.jsx(Vt,{}),s&&e.jsx($t,{})]})]})}function Vt(){return e.jsx(P,{name:"src",label:e.jsx(l,{message:"Playback source"}),className:"mb-24",minLength:1,maxLength:230,description:e.jsx(l,{message:"Supports audio, video, hls/dash stream and youtube video url. If left empty, best matching youtube video will be found automatically."})})}function $t(){const{spotify_is_setup:s}=Fe();return s?e.jsx(P,{name:"spotify_id",label:e.jsx(l,{message:"Spotify ID"}),className:"mb-24",minLength:22,maxLength:22}):null}function qt(){const{watch:s}=Q();return e.jsx(P,{required:!0,name:"duration",label:e.jsx(l,{message:"Duration (in milliseconds)"}),className:"mb-24",type:"number",min:1,max:864e5,description:e.jsx(l,{message:"Will appear on the site as: :preview",values:{preview:e.jsx(Da,{ms:s("duration")})}})})}const Ks="tracks";function Ws(s,{onSuccess:a}={}){const{trans:t}=M();return Z({mutationFn:n=>Bt(n),onSuccess:n=>{H(t(S("Track created"))),J.invalidateQueries({queryKey:ee(Ks)}),a==null||a(n)},onError:n=>ce(n,s)})}function Bt(s){return T.post(Ks,as(s)).then(a=>a.data)}function as(s){var a;return{...s,album_id:s.album_id?s.album_id:null,artists:(a=s.artists)==null?void 0:a.map(t=>t.id)}}function Gs({onTrackCreated:s,defaultValues:a}={}){const t=W({defaultValues:a}),n=Ws(t,{onSuccess:s});return{form:t,createTrack:n}}const Ot=""+new URL("light-bg-8c37cb47.svg",import.meta.url).href,Ht=""+new URL("dark-bg-38ecc414.svg",import.meta.url).href;function se({children:s,...a}){const t=ka();return e.jsxs("div",{className:"flex h-screen flex-col",...a,children:[e.jsx(bs,{className:"flex-shrink-0",color:"bg",darkModeColor:"bg"}),e.jsx("div",{className:"relative flex-auto overflow-y-auto bg-cover",style:{backgroundImage:`url(${t?Ht:Ot})`},children:e.jsxs("div",{className:"container mx-auto flex min-h-full flex-col p-14 md:p-24",children:[e.jsx("div",{className:"flex-auto",children:s}),e.jsx(vs,{})]})})]})}function Kt({wrapInContainer:s}){const a=de(),{pathname:t}=Y(),{form:n,createTrack:r}=Gs({onTrackCreated:i=>{t.includes("admin")?a(`/admin/tracks/${i.track.id}/edit`):a(Ne(i.track))}});return e.jsx(ue,{form:n,onSubmit:i=>{r.mutate(i)},title:e.jsx(l,{message:"Add new track"}),isLoading:r.isPending,disableSaveWhenNotDirty:!0,wrapInContainer:s,children:e.jsx(X,{children:e.jsx(me,{showExternalIdFields:!0})})})}function sr(){return e.jsx(se,{children:e.jsx(Kt,{})})}const Wt=s=>`tracks/${s}`;function Gt(s,a={}){const{trans:t}=M();return Z({mutationFn:n=>Qt(n),onSuccess:n=>{var r;H(t(S("Track updated"))),J.invalidateQueries({queryKey:ee("tracks")}),(r=a.onSuccess)==null||r.call(a,n)},onError:n=>ce(n,s)})}function Qt({id:s,...a}){return T.put(Wt(s),as(a)).then(t=>t.data)}function Qs(s,a={}){var r;const t=W({defaultValues:{...s,image:s.image||((r=s.album)==null?void 0:r.image)}}),n=Gt(t,{onSuccess:a.onTrackUpdated});return{form:t,updateTrack:n}}function Zt({wrapInContainer:s}){const a=Fs({loader:"editTrackPage"});return a.data?e.jsx(Jt,{track:a.data.track,wrapInContainer:s}):e.jsx(We,{query:a,loaderClassName:"absolute inset-0 m-auto",loaderIsScreen:!1})}function Jt({track:s,wrapInContainer:a}){const{canEdit:t}=Ta([s]),n=de(),{pathname:r}=Y(),{form:i,updateTrack:o}=Qs(s,{onTrackUpdated:c=>{r.includes("admin")?n("/admin/tracks"):n(Ne(c.track))}});return t?e.jsx(ue,{form:i,onSubmit:c=>{o.mutate(c)},title:e.jsx(l,{message:"Edit “:name“ track",values:{name:s.name}}),isLoading:o.isPending,disableSaveWhenNotDirty:!0,wrapInContainer:a,children:e.jsx(X,{children:e.jsx(me,{showExternalIdFields:!0})})}):e.jsx(Ge,{to:"/",replace:!0})}function ar(){return e.jsx(se,{children:e.jsx(Zt,{})})}const Zs="albums";function Js(s){const{trans:a}=M();return Z({mutationFn:t=>Yt(t),onSuccess:()=>{H(a(S("Album created"))),J.invalidateQueries({queryKey:ee(Zs)})},onError:t=>ce(t,s)})}function Yt(s){return T.post(Zs,Ys(s)).then(a=>a.data)}function Ys(s){var a,t;return{...s,artists:(a=s.artists)==null?void 0:a.map(n=>n.id),tracks:(t=s.tracks)==null?void 0:t.map(n=>as(n))}}const Xt=s=>`albums/${s}`;function en(s,a){const{trans:t}=M(),n=de(),{pathname:r}=Y();return Z({mutationFn:i=>sn(a,i),onSuccess:i=>{H(t(S("Album updated"))),J.invalidateQueries({queryKey:ee("albums")}),r.includes("admin")?n("/admin/albums"):n(we(i.album))},onError:i=>ce(i,s)})}function sn(s,a){return T.put(Xt(s),Ys(a)).then(t=>t.data)}const an=Ae(e.jsx("path",{d:"M20 9H4v2h16V9zM4 15h16v-2H4v2z"}),"DragHandleOutlined");function tn({track:s,hideAlbumField:a}){const{formId:t,close:n}=ys(),{form:r}=Qs(s);return e.jsxs(Be,{size:"fullscreen",children:[e.jsx(ks,{children:e.jsx(l,{message:"Edit “:name“ track",values:{name:s.name}})}),e.jsx(Oe,{children:e.jsx(oe,{id:t,form:r,onSubmit:i=>{n(i)},onBeforeSubmit:()=>{r.clearErrors()},children:e.jsx(me,{showExternalIdFields:!0,showAlbumField:!a})})}),e.jsxs(qe,{children:[e.jsx(I,{variant:"text",onClick:()=>n(),children:e.jsx(l,{message:"Cancel"})}),e.jsx(I,{form:t,variant:"flat",color:"primary",type:"submit",children:e.jsx(l,{message:"Update"})})]})]})}function nn({defaultValues:s,hideAlbumField:a}){const{formId:t,close:n}=ys(),{form:r}=Gs({defaultValues:s});return e.jsxs(Be,{size:"fullscreen",children:[e.jsx(ks,{children:e.jsx(l,{message:"Add new track"})}),e.jsx(Oe,{children:e.jsx(oe,{id:t,form:r,onSubmit:i=>{n(i)},onBeforeSubmit:()=>{r.clearErrors()},children:e.jsx(me,{showExternalIdFields:!0,showAlbumField:!a})})}),e.jsxs(qe,{children:[e.jsx(I,{variant:"text",onClick:()=>n(),children:e.jsx(l,{message:"Cancel"})}),e.jsx(I,{form:t,variant:"flat",color:"primary",type:"submit",children:e.jsx(l,{message:"Create"})})]})]})}function rn(){const s=Q(),{watch:a,setValue:t,getValues:n}=s,{fields:r,remove:i,prepend:o,move:c}=Ns({name:"tracks"}),d=(m,g)=>{var f;const u=(f=n("tracks"))==null?void 0:f.findIndex(j=>j.uploadId===m);u!=null&&t(`tracks.${u}`,le(g,n(`tracks.${u}`)),{shouldDirty:!0})},{openFilePicker:h}=ze({onUploadStart:m=>o(le(m,{artists:s.getValues("artists"),genres:s.getValues("genres"),tags:s.getValues("tags")})),onMetadataChange:(m,g)=>{Hs(s,g),d(m.id,g)}}),p=a("tracks")||[];return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx("h2",{className:"my-24 text-xl font-semibold",children:e.jsx(l,{message:"Tracks"})}),e.jsx(I,{variant:"outline",color:"primary",size:"xs",className:"ml-auto",startIcon:e.jsx(qs,{}),onClick:()=>h(),children:e.jsx(l,{message:"Upload tracks"})}),e.jsxs(re,{type:"modal",onClose:m=>{m&&o(m)},children:[e.jsx(ne,{label:e.jsx(l,{message:"Create track"}),children:e.jsx(R,{variant:"outline",color:"primary",size:"xs",children:e.jsx(Je,{})})}),e.jsx(nn,{hideAlbumField:!0,defaultValues:{artists:a("artists"),tags:a("tags"),genres:a("genres")}})]})]}),r.map((m,g)=>{const u=p[g];return e.jsx(ln,{track:u,onRemove:()=>i(g),onSort:(f,j)=>c(f,j),tracks:p,onUpdate:f=>{d(u.uploadId,f)}},m.id)}),r.length?null:e.jsx(ws,{className:"mt-40",image:e.jsx(Is,{src:_s}),title:e.jsx(l,{message:"This album does not have any tracks yet"})})]})}function ln({track:s,tracks:a,onRemove:t,onUpdate:n,onSort:r}){const i=x.useRef(null),o=x.useRef(null),c=C(g=>g.abortUpload),d=C(g=>s.uploadId?g.fileUploads.get(s.uploadId):null),{isUploading:h,status:p}=ss(s.uploadId),{sortableProps:m}=Ma({disabled:h,ref:i,item:s,items:a,type:"albumFormTrack",preview:o,strategy:"line",onSortEnd:(g,u)=>{r(g,u)}});return e.jsxs("div",{className:"border-b border-t border-t-transparent py-4",ref:i,...m,children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(R,{className:"mr-14 flex-shrink-0",disabled:h,children:e.jsx(an,{})}),e.jsx("div",{className:"flex-auto overflow-hidden overflow-ellipsis whitespace-nowrap",children:s.name}),d&&e.jsxs("div",{className:"mr-10 flex items-center",children:[e.jsx(Bs,{fileUpload:d,status:p,className:"mr-10"}),e.jsx(js,{isIndeterminate:p==="processing",value:d.percentage,size:"sm"})]}),e.jsxs(re,{type:"modal",onClose:g=>{g&&n(g)},children:[e.jsx(ne,{label:e.jsx(l,{message:"Edit track"}),children:e.jsx(R,{className:"ml-auto flex-shrink-0 text-muted",disabled:h,children:e.jsx(es,{})})}),e.jsx(tn,{track:s,hideAlbumField:!0})]}),e.jsxs(re,{type:"modal",onClose:g=>{g&&(s.uploadId&&c(s.uploadId),t())},children:[e.jsx(ne,{label:e.jsx(l,{message:"Remove track"}),children:e.jsx(R,{className:"flex-shrink-0 text-muted",children:e.jsx(He,{})})}),e.jsx(Cs,{isDanger:!0,title:e.jsx(l,{message:"Remove track"}),body:e.jsx(l,{message:"Are you sure you want to remove this track from the album?"}),confirm:e.jsx(l,{message:"Remove"})})]})]}),e.jsx(on,{track:s,ref:o})]})}const on=fs.forwardRef(({track:s},a)=>{var n,r;let t=s.name;return(n=s.artists)!=null&&n.length&&(t+=`- ${(r=s.artists)==null?void 0:r[0].name}`),e.jsx(Ua,{ref:a,children:()=>e.jsx("div",{className:"rounded bg-chip p-8 text-sm shadow",children:t})})});function ts({showExternalIdFields:s}){const{trans:a}=M(),t=Ke();return e.jsxs(x.Fragment,{children:[e.jsxs("div",{className:"gap-24 md:flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Pe,{name:"image",diskPrefix:"album_images",label:t?e.jsx(l,{message:"Image"}):null,variant:t?"input":"square",previewSize:"md:w-full md:w-224 md:aspect-square",stretchPreview:!0})}),e.jsxs("div",{className:"mt-24 flex-auto md:mt-0",children:[e.jsx(P,{name:"name",label:e.jsx(l,{message:"Name"}),className:"mb-24",required:!0,autoFocus:!0}),e.jsx(Ct,{name:"release_date",label:e.jsx(l,{message:"Release date"}),className:"mb-24",granularity:"day"}),e.jsx(Vs,{name:"artists",className:"mb-24"}),e.jsx(ie,{label:e.jsx(l,{message:"Genres"}),placeholder:a(S("+Add genre")),model:Ze,name:"genres",allowCustomValue:!0,className:"mb-24"}),e.jsx(ie,{label:e.jsx(l,{message:"Tags"}),placeholder:a(S("+Add tag")),model:$s,name:"tags",allowCustomValue:!0,className:"mb-24"}),e.jsx(P,{name:"description",label:e.jsx(l,{message:"Description"}),inputElementType:"textarea",rows:5,className:"mb-24"}),s&&e.jsx(cn,{})]})]}),e.jsx(rn,{})]})}function cn(){const{spotify_is_setup:s}=Fe();return s?e.jsx(P,{name:"spotify_id",label:e.jsx(l,{message:"Spotify ID"}),className:"mb-24",minLength:22,maxLength:22}):null}function dn({wrapInContainer:s}){const a=Ps({loader:"editAlbumPage"});return a.data?e.jsx(X,{children:e.jsx(un,{album:a.data.album,wrapInContainer:s})}):e.jsx(We,{query:a,loaderIsScreen:!1,loaderClassName:"absolute inset-0 m-auto"})}function un({album:s,wrapInContainer:a}){const{canEdit:t}=za(s),n=!!C(o=>o.activeUploadsCount),r=W({defaultValues:{image:s.image,name:s.name,release_date:s.release_date,artists:s.artists,genres:s.genres,tags:s.tags,description:s.description,spotify_id:s.spotify_id,tracks:s.tracks}}),i=en(r,s.id);return t?e.jsx(ue,{form:r,onSubmit:o=>{i.mutate(o)},title:e.jsx(l,{message:"Edit “:name“ album",values:{name:s.name}}),isLoading:i.isPending||n,disableSaveWhenNotDirty:!0,wrapInContainer:a,children:e.jsx(ts,{showExternalIdFields:!0})}):e.jsx(Ge,{to:"/",replace:!0})}function tr(){return e.jsx(se,{children:e.jsx(dn,{wrapInContainer:!1})})}const mn=x.forwardRef(({onUploadStart:s,onCancel:a,onCreate:t},n)=>{const r=Ds(),i=Me(),[o,c]=x.useState(!1),d=W({defaultValues:{tracks:[],artists:r?[r]:[],release_date:i.toAbsoluteString()}}),h=d.watch("tracks")||[],p=C(b=>b.abortUpload),m=!!C(b=>b.activeUploadsCount),{openFilePicker:g,uploadTracks:u,validateUploads:f}=ze({onUploadStart:b=>{c(!0),d.setValue("tracks",[...d.getValues("tracks"),b]),s()},onMetadataChange:(b,y)=>{Hs(d,y),d.setValue("tracks",d.getValues("tracks").map(N=>N.uploadId===b.id?le(y,N):N))}});x.useImperativeHandle(n,()=>({openFilePicker:g,uploadTracks:u,validateUploads:f}),[g,u,f]);const j=Js(d);return o?e.jsxs(oe,{className:"mb-30 rounded border bg-paper p-14 md:p-24",form:d,onSubmit:b=>j.mutate(b,{onSuccess:y=>{c(!1),d.reset(),t(y.album)}}),children:[e.jsx(ts,{showExternalIdFields:!1}),e.jsxs("div",{className:"mt-24",children:[e.jsx(I,{variant:"text",onClick:()=>{h.forEach(b=>{p(b.uploadId)}),d.reset(),c(!1),a()},className:"mr-10",children:e.jsx(l,{message:"Cancel"})}),e.jsx(I,{type:"submit",variant:"flat",color:"primary",disabled:m||j.isPending,children:e.jsx(l,{message:"Save"})})]})]}):null}),xn=x.forwardRef(({onUploadStart:s,onCancel:a,onCreate:t},n)=>{const r=Ds(),i=C(m=>m.abortUpload),[o,c]=x.useState([]),{openFilePicker:d,uploadTracks:h,validateUploads:p}=ze({onUploadStart:m=>{c(g=>r?[...g,{...m,artists:[r]}]:[...g,m]),s()},onMetadataChange:(m,g)=>{c(u=>u.map(f=>f.uploadId===m.id?le(g,f):f))}});return x.useImperativeHandle(n,()=>({openFilePicker:d,uploadTracks:h,validateUploads:p}),[d,h,p]),e.jsx("div",{className:"w-full",children:o.map(m=>e.jsx(gn,{track:m,onCreate:g=>{c(u=>u.filter(f=>f.uploadId!==m.uploadId)),t(g)},onRemove:()=>{c(g=>{const u=g.filter(f=>f.uploadId!==m.uploadId);return u.length||a(),u}),i(m.uploadId)}},m.uploadId))})}),gn=x.memo(({track:s,onRemove:a,onCreate:t})=>{const n=W({defaultValues:s}),r=Ws(n),i=C(h=>h.fileUploads.get(s.uploadId)),{isUploading:o,status:c}=ss(s.uploadId);x.useEffect(()=>{n.reset(s)},[s,n]);const d=o&&i?e.jsx(Os,{fileUpload:i,status:c}):null;return e.jsxs(oe,{form:n,onSubmit:h=>{r.mutate(h,{onSuccess:p=>t(p.track)})},className:"mb-30 rounded border bg-paper p-14 md:p-24",children:[e.jsx(me,{uploadButton:d,showExternalIdFields:!1}),e.jsx(I,{variant:"text",onClick:()=>a(),className:"mr-10",children:e.jsx(l,{message:"Cancel"})}),e.jsx(I,{type:"submit",variant:"flat",color:"primary",disabled:r.isPending||!n.watch("src"),children:e.jsx(l,{message:"Save"})})]})}),fn=""+new URL("album-border-b5dd7d9f.png",import.meta.url).href;function hn({media:s}){var n,r;const a=s.model_type===Ea,t=a?we(s,{absolute:!0}):Ne(s,{absolute:!0});return e.jsxs("div",{className:"mx-auto my-20 flex w-780 max-w-full items-center gap-28 rounded border bg-paper p-20",children:[e.jsxs("div",{className:D(a&&"relative isolate mx-18 my-14"),children:[a?e.jsx(Te,{album:s,className:"relative z-20 flex-shrink-0 rounded",size:"w-132 h-132"}):e.jsx(Ye,{track:s,className:"relative z-20 flex-shrink-0 rounded",size:"w-132 h-132"}),a&&e.jsx("img",{className:"absolute -left-14 -top-14 z-10 block h-160 w-160 max-w-160",src:fn,alt:""})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("div",{className:"text-base font-bold",children:s.name}),e.jsx("div",{className:"mb-14 text-sm text-muted",children:e.jsx(Ue,{artists:s.artists})}),(n=s.genres)!=null&&n.length?e.jsx(As,{selectable:!1,size:"sm",className:"mb-14",children:(r=s.genres)==null?void 0:r.map(i=>e.jsx(ps,{children:i.display_name||i.name},i.id))}):null,e.jsx("div",{className:"text-sm",children:e.jsx(l,{message:"Upload complete. <a>Go to your track</a>",values:{a:i=>e.jsx(O,{className:Ss,to:a?we(s):Ne(s),children:i})}})})]}),e.jsx("div",{className:"max-w-300 ml-auto flex-auto",children:e.jsxs("div",{className:"text-sm text-muted",children:[e.jsx(l,{message:"Share your new track"}),e.jsx(La,{name:s.name,image:s.image,link:t}),e.jsx(Na,{value:t,readOnly:!0,className:"mt-24 w-full",size:"sm",onClick:i=>{i.target.select()}})]})})]})}function pn({isVisible:s}){const a=e.jsx(G.div,{...Ve,transition:{duration:.3},className:"pointer-events-none absolute inset-0 min-h-full w-full border-2 border-dashed border-primary bg-primary-light/30",children:e.jsx(G.div,{initial:{y:"100%",opacity:0},animate:{y:"-10px",opacity:1},exit:{y:"100%",opacity:0},className:"fixed bottom-0 left-0 right-0 mx-auto max-w-max rounded bg-primary p-10 text-on-primary",children:e.jsx(l,{message:"Drop your files anywhere on the page to upload"})})},"dragTargetMask");return e.jsx(Se,{children:s?a:null})}function jn(){const{user:s}=wa();s!=null&&s.id&&J.resetQueries({queryKey:["minutesLimit",s.id]})}function bn(){const{user:s}=Ia(),a=s==null?void 0:s.id;return K({queryKey:["minutesLimit",a],queryFn:()=>vn(a),enabled:a!=null})}function vn(s){return T.get(`users/${s}/minutes-left`).then(a=>a.data)}function yn({backstageLayout:s=!1}){return e.jsx(X,{children:e.jsx(kn,{backstageLayout:s})})}function kn({backstageLayout:s}){const[a,t]=x.useState("tracks"),[n,r]=x.useState(!1),i=x.useRef(null),o=a==="tracks"?xn:mn,[c,d]=x.useState([]),h=x.useRef(null),[p,m]=x.useState(!1),{droppableProps:g}=Ra({id:"uploadPageRoot",ref:h,types:["nativeFile"],onDragEnter:()=>m(!0),onDragLeave:()=>m(!1),onDrop:async f=>{var j,b;if(f.type==="nativeFile"){const y=await f.getData(),N=(j=i.current)==null?void 0:j.validateUploads(y);N!=null&&N.length&&((b=i.current)==null||b.uploadTracks(N))}}}),u=s?se:wn;return e.jsxs(u,{...g,children:[!n&&e.jsx(Nn,{onUpload:()=>{var f;return(f=i.current)==null?void 0:f.openFilePicker()},uploadMode:a,onUploadModeChange:t}),c.map(f=>e.jsx(hn,{media:f},f.id)),e.jsx(o,{ref:i,onUploadStart:()=>r(!0),onCreate:f=>{d(j=>[...j,f]),jn()},onCancel:()=>{r(!1)}}),e.jsx(pn,{isVisible:p})]})}function Nn({onUpload:s,uploadMode:a,onUploadModeChange:t}){const{data:n}=bn();return e.jsxs("div",{className:"pt-40",children:[e.jsxs("div",{className:"mx-auto flex max-w-580 flex-col items-center rounded border bg-paper p-20 md:p-48",children:[e.jsx("h1",{className:"text-base md:text-[22px] md:font-light",children:e.jsx(l,{message:"Drag and drop your tracks, videos & albums here."})}),e.jsx(I,{variant:"flat",color:"primary",className:"mt-20 w-min",onClick:()=>s(),children:e.jsx(l,{message:"Or choose files to upload"})}),e.jsx("div",{className:"mt-20 border-t pt-20",children:e.jsx(Za,{checked:a==="album",onChange:r=>t(r.target.checked?"album":"tracks"),children:e.jsx(l,{message:"Make an album when multiple files are selected"})})})]}),e.jsx("div",{className:"mt-20 min-h-20 text-center text-sm text-muted",children:(n==null?void 0:n.minutesLeft)!=null&&e.jsx(l,{message:"You have :count minutes left. Try <a>Pro accounts</a> to get more time and access to advanced features.",values:{count:n.minutesLeft,a:r=>e.jsx(O,{className:Ss,to:"/pricing",children:r})}})})]})}function wn({children:s,...a}){return e.jsx("div",{...a,className:"relative min-h-full",children:e.jsx("div",{className:"container mx-auto p-14 md:p-24",children:s})})}function nr(){return e.jsx(yn,{backstageLayout:!0})}function In({wrapInContainer:s}){return e.jsx(X,{children:e.jsx(Cn,{wrapInContainer:s})})}function Cn({wrapInContainer:s}){const a=!!C(p=>p.activeUploadsCount),t=Me(),n=de(),{pathname:r}=Y(),[i]=Ca(),{data:o}=Ls(`normalized-models/artist/${i.get("artistId")}`,void 0,{enabled:!!i.get("artistId")}),c=o==null?void 0:o.model,d=W({defaultValues:{release_date:t.toAbsoluteString()}}),h=Js(d);return x.useEffect(()=>{c&&d.reset({artists:[c]})},[c,d]),e.jsx(ue,{form:d,onSubmit:p=>{h.mutate(p,{onSuccess:m=>{r.includes("admin")?n(c?`/admin/artists/${c.id}/edit`:"/admin/albums"):n(we(m.album))}})},title:e.jsx(l,{message:"Add new album"}),isLoading:h.isPending||a,disableSaveWhenNotDirty:!0,wrapInContainer:s,children:e.jsx(ts,{showExternalIdFields:!0})})}function rr(){return e.jsx(se,{children:e.jsx(In,{wrapInContainer:!1})})}function ir(){const{requestId:s}=De();return K({queryKey:["backstage-request",+s],queryFn:()=>Sn(s)})}function Sn(s){return T.get(`backstage-request/${s}`).then(a=>a.data)}const lr=Ae(e.jsx("path",{d:"M7 3H4v3H2V1h5v2zm15 3V1h-5v2h3v3h2zM7 21H4v-3H2v5h5v-2zm13-3v3h-3v2h5v-5h-2zM17 6H7v12h10V6zm2 12c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v12zM15 8H9v2h6V8zm0 3H9v2h6v-2zm0 3H9v2h6v-2z"}),"DocumentScannerOutlined"),An=[{key:"name",allowsSorting:!0,header:()=>e.jsx(l,{message:"Name"}),visibleInMode:"all",width:"flex-3",body:s=>e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx(Te,{album:s,className:"flex-shrink-0",size:"w-34 h-34 rounded"}),e.jsx(Xe,{album:s,target:"_blank"})]})},{key:"release_date",allowsSorting:!0,header:()=>e.jsx(l,{message:"Release date"}),body:s=>s.release_date?e.jsx(Sa,{date:s.release_date}):null},{key:"track_count",allowsSorting:!1,header:()=>e.jsx(l,{message:"Track count"}),body:s=>s.tracks_count?e.jsx(Ie,{value:s.tracks_count}):null},{key:"plays",allowsSorting:!0,header:()=>e.jsx(l,{message:"Plays"}),body:s=>s.plays?e.jsx(Ie,{value:s.plays}):null},{key:"actions",header:()=>e.jsx(l,{message:"Actions"}),width:"w-84 flex-shrink-0",visibleInMode:"all",hideHeader:!0,align:"end",body:s=>e.jsx(Pn,{album:s})}];function Fn({albums:s=[]}){const{watch:a}=Q(),t=a("id"),{data:n,sortDescriptor:r,onSortChange:i}=_a(s);return e.jsxs("div",{children:[e.jsxs("div",{className:"my-24",children:[e.jsxs("div",{className:"flex items-center gap-12",children:[e.jsx("h2",{className:"text-xl font-semibold",children:e.jsx(l,{message:"Albums"})}),e.jsx(I,{variant:"outline",color:"primary",size:"xs",className:"ml-auto",startIcon:e.jsx(Je,{}),elementType:t?O:void 0,to:`../../../albums/new?artistId=${t}`,relative:"path",disabled:!t,children:e.jsx(l,{message:"Add album"})})]}),!t&&e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsx(rt,{viewBox:"0 0 16 16",size:"xs",className:"text-muted"}),e.jsx(l,{message:"Save changes to enable album creation."})]})]}),e.jsx(Va,{columns:An,data:s,sortDescriptor:r,onSortChange:i,enableSelection:!1}),n.length?null:e.jsx(ws,{className:"mt-40",image:e.jsx(Is,{src:_s}),title:e.jsx(l,{message:"This artist does not have any albums yet"})})]})}function Pn({album:s}){const a=$a();return e.jsxs("div",{className:"text-muted",children:[e.jsx(O,{to:`../../../albums/${s.id}/edit`,relative:"path",children:e.jsx(R,{size:"md",children:e.jsx(es,{})})}),e.jsxs(re,{type:"modal",onClose:t=>{t&&a.mutate({albumId:s.id})},children:[e.jsx(R,{size:"md",disabled:a.isPending,children:e.jsx(He,{})}),e.jsx(Cs,{isDanger:!0,title:e.jsx(l,{message:"Delete album"}),body:e.jsx(l,{message:"Are you sure you want to delete this album?"}),confirm:e.jsx(l,{message:"Delete"})})]})]})}function Dn({albums:s,showExternalFields:a}){const t=Ke();return e.jsxs(X,{children:[e.jsxs("div",{className:"gap-24 md:flex",children:[e.jsxs("div",{className:"flex-shrink-0",children:[e.jsx(Pe,{name:"image_small",diskPrefix:"artist_images",label:t?e.jsx(l,{message:"Image"}):null,variant:t?"input":"square",previewSize:t?void 0:"w-full md:w-224 aspect-square",stretchPreview:!0}),a&&e.jsx(Ja,{name:"verified",className:"mt-14",children:e.jsx(l,{message:"Verified"})})]}),e.jsx("div",{className:"mt-24 flex-auto md:mt-0",children:e.jsxs(qa,{isLazy:!0,children:[e.jsxs(Ba,{children:[e.jsx(je,{children:e.jsx(l,{message:"Details"})}),e.jsx(je,{children:e.jsx(l,{message:"Links"})}),e.jsx(je,{children:e.jsx(l,{message:"Biography"})}),e.jsx(je,{children:e.jsx(l,{message:"Images"})})]}),e.jsxs(Oa,{className:"pt-20",children:[e.jsx(be,{children:e.jsx(Tn,{showExternalFields:a})}),e.jsx(be,{children:e.jsx(Ha,{})}),e.jsx(be,{children:e.jsx(Un,{})}),e.jsx(be,{children:e.jsx(Mn,{})})]})]})})]}),e.jsx(Fn,{albums:s})]})}function Tn({showExternalFields:s}){const{trans:a}=M();return e.jsxs(x.Fragment,{children:[e.jsx(P,{name:"name",label:e.jsx(l,{message:"Name"}),className:"mb-24",required:!0,autoFocus:!0,disabled:!s}),e.jsx(ie,{label:e.jsx(l,{message:"Genres"}),placeholder:a(S("+Add genre")),model:Ze,name:"genres",allowCustomValue:!0,className:"mb-24"}),s&&e.jsx(zn,{})]})}function Un(){return e.jsxs(x.Fragment,{children:[e.jsx(P,{name:"profile.country",label:e.jsx(l,{message:"Country"}),className:"mb-24"}),e.jsx(P,{name:"profile.city",label:e.jsx(l,{message:"City"}),className:"mb-24"}),e.jsx(P,{inputElementType:"textarea",rows:5,name:"profile.description",label:e.jsx(l,{message:"Description"}),className:"mb-24"})]})}function Mn(){const{fields:s,append:a,remove:t}=Ns({name:"profile_images"});return e.jsxs("div",{children:[e.jsx("div",{className:"mb-24 flex flex-wrap gap-12",children:s.map((n,r)=>e.jsx(Pe,{name:`profile_images.${r}.url`,diskPrefix:"artist_images",variant:"square",previewSize:"w-160 h-160",stretchPreview:!0,showRemoveButton:!0,onChange:i=>{i||t(r)}},n.id))}),e.jsx(I,{variant:"outline",color:"primary",startIcon:e.jsx(Je,{}),onClick:()=>{a({url:""})},children:e.jsx(l,{message:"Add another image"})})]})}function zn(){const{spotify_is_setup:s}=Fe();return s?e.jsx(P,{name:"spotify_id",label:e.jsx(l,{message:"Spotify ID"}),className:"mb-24",minLength:22,maxLength:22}):null}const En=s=>`artists/${s}`;function Ln(s){const{trans:a}=M(),t=de(),{pathname:n}=Y();return Z({mutationFn:r=>Rn(r),onSuccess:r=>{H(a(S("Artist updated"))),J.invalidateQueries({queryKey:ee("artists")}),n.includes("admin")?t("/admin/artists"):t(Ka(r.artist))},onError:r=>ce(r,s)})}function Rn({id:s,...a}){return T.put(En(s),a).then(t=>t.data)}function Xs({wrapInContainer:s,showExternalFields:a}){const t=Ts({loader:"editArtistPage"});return t.data?e.jsx(_n,{response:t.data,wrapInContainer:s,showExternalFields:a}):e.jsx(We,{query:t,loaderClassName:"absolute inset-0 m-auto"})}function _n({response:s,wrapInContainer:a,showExternalFields:t}){var o;const{canEdit:n}=Wa(s.artist),r=W({defaultValues:{id:s.artist.id,name:s.artist.name,verified:s.artist.verified,spotify_id:s.artist.spotify_id,genres:s.artist.genres,image_small:s.artist.image_small,links:s.artist.links,profile:s.artist.profile,profile_images:s.artist.profile_images}}),i=Ln(r);return n?e.jsx(ue,{form:r,onSubmit:c=>{i.mutate(c)},title:e.jsx(l,{message:"Edit “:name“ artist",values:{name:s.artist.name}}),isLoading:i.isPending,disableSaveWhenNotDirty:!0,wrapInContainer:a,children:e.jsx(Dn,{albums:(o=s.albums)==null?void 0:o.data,showExternalFields:t})}):e.jsx(Ge,{to:"/",replace:!0})}function or(){return e.jsx(se,{children:e.jsx(Xs,{wrapInContainer:!1,showExternalFields:!1})})}function cr(){return e.jsx(Xs,{showExternalFields:!0})}const xs="reports/insights";function Vn(s,a){return K({queryKey:[xs,s],queryFn:()=>$n(xs,s),placeholderData:a.isEnabled?Ce:void 0,enabled:a.isEnabled})}function $n(s,a){var n;const t={model:a.model,metrics:(n=a.metrics)==null?void 0:n.join(",")};return t.startDate=a.dateRange.start.toAbsoluteString(),t.endDate=a.dateRange.end.toAbsoluteString(),t.timezone=a.dateRange.start.timeZone,T.get(s,{params:t}).then(r=>r.data)}function ye({data:s,isLoading:a,...t}){const n=(s==null?void 0:s.datasets[0].data)||[];return e.jsxs(it,{...t,className:"w-1/2 min-w-500 md:min-w-0",contentIsFlex:a,contentClassName:"max-h-[370px] overflow-y-auto compact-scrollbar",children:[a&&e.jsx(lt,{}),n.map(r=>e.jsxs("div",{className:"mb-20 flex items-center justify-between gap-24 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(qn,{model:r.model,size:"w-42 h-42",className:"flex-shrink-0 rounded"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:e.jsx(Bn,{model:r.model})}),e.jsx("div",{className:"text-xs text-muted",children:e.jsx(On,{model:r.model})})]})]}),e.jsxs("div",{className:"flex flex-shrink-0 items-center gap-4",children:[e.jsx(Ga,{className:"text-muted",size:"sm"}),e.jsx(l,{message:":count plays",values:{count:e.jsx(Ie,{value:r.value})}})]})]},r.model.id)),!a&&!n.length?e.jsxs("div",{className:"flex items-center gap-8 text-muted",children:[e.jsx(Dt,{size:"sm"}),e.jsx(l,{message:"No plays in selected timeframe."})]}):null]})}function qn({model:s,size:a,className:t}){const{pathname:n}=Y(),i=n.includes("/admin")?`/admin/${s.model_type}s/${s.id}/insights`:`/backstage/${s.model_type}s/${s.id}/insights`;switch(s.model_type){case"artist":return e.jsx(O,{to:i,children:e.jsx(Us,{artist:s,size:a,className:t})});case"album":return e.jsx(O,{to:i,children:e.jsx(Te,{album:s,size:a,className:t})});case"track":return e.jsx(O,{to:i,children:e.jsx(Ye,{track:s,size:a,className:t})});case"user":return e.jsx(Qa,{user:s,size:a,className:t})}}function Bn({model:s}){switch(s.model_type){case"artist":return e.jsx(zs,{artist:s,target:"_blank"});case"album":return e.jsx(Xe,{album:s,target:"_blank"});case"track":return e.jsx(Ms,{track:s,target:"_blank"});case"user":return s.id?e.jsx(Aa,{user:s,target:"_blank"}):e.jsx(x.Fragment,{children:s.name})}}function On({model:s}){switch(s.model_type){case"artist":case"user":return null;case"album":case"track":return e.jsx(Ue,{artists:s.artists,target:"_blank"})}}function ns(s){const t="flex flex-col lg:flex-row lg:items-center overflow-x-auto gap-12 md:gap-24 mb-12 md:mb-24",n=s.model,r=s.dateRange;return e.jsxs(x.Fragment,{children:[e.jsxs("div",{className:t,children:[e.jsx(L,{metric:"plays",model:n,dateRange:r,children:({data:i})=>e.jsx(ot,{className:"flex-auto",title:e.jsx(l,{message:"Plays"}),hideLegend:!0,description:e.jsx(l,{message:":count total plays",values:{count:e.jsx(Ie,{value:(i==null?void 0:i.report.plays.total)||0})}})})}),e.jsx(L,{metric:"devices",model:n,dateRange:r,children:e.jsx(us,{title:e.jsx(l,{message:"Top devices"})})})]}),e.jsxs("div",{className:t,children:[s.showTracks&&e.jsx(L,{metric:"tracks",model:n,dateRange:r,children:e.jsx(ye,{title:e.jsx(l,{message:"Most played tracks"})})}),e.jsx(L,{metric:"users",model:n,dateRange:r,children:e.jsx(ye,{title:e.jsx(l,{message:"Top listeners"})})})]}),s.showArtistsAndAlbums&&e.jsxs("div",{className:t,children:[e.jsx(L,{metric:"artists",model:n,dateRange:r,children:e.jsx(ye,{title:e.jsx(l,{message:"Most played artists"})})}),e.jsx(L,{metric:"albums",model:n,dateRange:r,children:e.jsx(ye,{title:e.jsx(l,{message:"Most played albums"})})})]}),e.jsxs("div",{className:t,children:[e.jsx(L,{metric:"locations",model:n,dateRange:r,children:e.jsx(ct,{className:"w-1/2 flex-auto lg:max-w-[740px]"})}),e.jsx(L,{metric:"platforms",model:n,dateRange:r,children:e.jsx(us,{className:"max-w-500",title:e.jsx(l,{message:"Top platforms"})})})]})]})}function L({children:s,metric:a,model:t,dateRange:n}){var p,m;const[r,i]=x.useState(!1),o=Vn({metrics:[a],model:t,dateRange:n},{isEnabled:r}),c=typeof s=="function"?s(o):s,d=x.useRef(),h=x.useCallback(g=>{var u;if(g){const f=new IntersectionObserver(([j])=>{var b;j.isIntersecting&&(i(!0),(b=d.current)==null||b.disconnect(),d.current=void 0)},{threshold:.1});d.current=f,f.observe(g)}else d.current&&((u=d.current)==null||u.disconnect())},[]);return x.cloneElement(c,{data:(m=(p=o.data)==null?void 0:p.report)==null?void 0:m[a],isLoading:o.isLoading,contentRef:h})}function rs({children:s,reportModel:a,title:t,isNested:n}){const[r,i]=x.useState(()=>dt[2].getRangeValue());return e.jsxs(x.Fragment,{children:[e.jsx(Fa,{children:e.jsx(l,{message:"Insights"})}),e.jsxs("div",{className:"flex h-full flex-col",children:[!n&&e.jsx(bs,{className:"flex-shrink-0",color:"bg",darkModeColor:"bg"}),e.jsx("div",{className:"relative flex-auto overflow-y-auto bg-cover",children:e.jsxs("div",{className:"mx-auto flex min-h-full max-w-[1600px] flex-col overflow-x-hidden p-12 md:p-24",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsxs("div",{className:"mb-38 mt-14 h-48 items-center justify-between gap-24 md:flex",children:[t||e.jsx(te,{className:"max-w-320"}),e.jsx("div",{className:"flex flex-shrink-0 items-center justify-between gap-10 md:gap-24",children:e.jsx(ut,{value:r,onChange:i})})]}),x.cloneElement(s,{dateRange:r,model:a})]}),!n&&e.jsx(vs,{})]})})]})]})}function is({image:s,name:a,description:t}){return e.jsxs("div",{className:"flex items-center gap-10",children:[x.cloneElement(s,{size:"w-48 h-48",className:"rounded"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"overflow-hidden overflow-ellipsis whitespace-nowrap text-base",children:["“",a,"“ ",e.jsx(l,{message:"insights"})]}),t&&e.jsx("div",{className:"text-sm text-muted",children:t})]})]})}function Hn({isNested:s}){const{artistId:a}=De(),{data:t}=Ts({loader:"artist"});return e.jsx(rs,{reportModel:`artist=${a}`,title:(t==null?void 0:t.artist)&&e.jsx(is,{image:e.jsx(Us,{artist:t.artist}),name:e.jsx(zs,{artist:t.artist})}),isNested:s,children:e.jsx(ns,{showTracks:!0})})}function dr(){return e.jsx(Hn,{isNested:!0})}function Kn({isNested:s}){const{albumId:a}=De(),{data:t}=Ps({loader:"album"});return e.jsx(rs,{reportModel:`album=${a}`,title:(t==null?void 0:t.album)&&e.jsx(is,{image:e.jsx(Te,{album:t.album}),name:e.jsx(Xe,{album:t.album}),description:e.jsx(Ue,{artists:t.album.artists})}),isNested:s,children:e.jsx(ns,{showTracks:!0})})}function ur(){return e.jsx(Kn,{isNested:!0})}function Wn({isNested:s}){const{trackId:a}=De(),{data:t}=Fs({loader:"track"});return e.jsx(rs,{reportModel:`track=${a}`,title:(t==null?void 0:t.track)&&e.jsx(is,{image:e.jsx(Ye,{track:t.track}),name:e.jsx(Ms,{track:t.track}),description:e.jsx(Ue,{artists:t.track.artists})}),isNested:s,children:e.jsx(ns,{})})}function mr(){return e.jsx(Wn,{isNested:!0})}export{dn as A,se as B,Nt as C,ee as D,yn as E,jt as F,In as G,cr as H,Dt as I,ur as J,mr as K,qs as L,dr as N,Zt as U,lr as a,nr as b,Hn as c,Kn as d,Wn as e,sr as f,ar as g,rr as h,tr as i,or as j,Rs as k,Ls as l,Xn as m,Ct as n,Ft as o,Es as p,ue as q,At as r,er as s,Pt as t,ir as u,_s as v,Dn as w,ns as x,an as y,Kt as z};
//# sourceMappingURL=backstage-track-insights-eeaf15bf.js.map
